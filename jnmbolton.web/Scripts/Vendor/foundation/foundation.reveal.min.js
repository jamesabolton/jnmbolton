(function(n,t){"use strict";Foundation.libs.reveal={name:"reveal",version:"4.1.3",locked:!1,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:n(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(t,i,r){return this.scope=t||this.scope,Foundation.inherit(this,"data_options delay"),typeof i=="object"?n.extend(!0,this.settings,i):typeof r!="undefined"&&n.extend(!0,this.settings,r),typeof i!="string"?(this.events(),this.settings.init):this[i].call(this,r)},events:function(){var t=this;n(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(i){i.preventDefault(),t.locked||(t.locked=!0,t.open.call(t,n(this)))}).on("click.fndtn.reveal touchend.click.fndtn.reveal",this.close_targets(),function(i){if(i.preventDefault(),!t.locked){var r=n.extend({},t.settings,t.data_options(n(".reveal-modal.open")));if(n(i.target)[0]===n("."+r.bgClass)[0]&&!r.closeOnBackgroundClick)return;t.locked=!0,t.close.call(t,n(this).closest(".reveal-modal"))}}).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video);return!0},open:function(t){var i,r;i=t?n("#"+t.data("reveal-id")):n(this.scope),i.hasClass("open")||(r=n(".reveal-modal.open"),typeof i.data("css-top")=="undefined"&&i.data("css-top",parseInt(i.css("top"),10)).data("offset",this.cache_offset(i)),i.trigger("open"),r.length<1&&this.toggle_bg(i),this.hide(r,this.settings.css.close),this.show(i,this.settings.css.open))},close:function(t){var t=t||n(this.scope),i=n(".reveal-modal.open");i.length>0&&(this.locked=!0,t.trigger("close"),this.toggle_bg(t),this.hide(i,this.settings.css.close))},close_targets:function(){var n="."+this.settings.dismissModalClass;return this.settings.closeOnBackgroundClick?n+", ."+this.settings.bgClass:n},toggle_bg:function(){n(".reveal-modal-bg").length===0&&(this.settings.bg=n("<div />",{"class":this.settings.bgClass}).appendTo("body")),this.settings.bg.filter(":visible").length>0?this.hide(this.settings.bg):this.show(this.settings.bg)},show:function(i,r){var u;return r?/pop/i.test(this.settings.animation)?(r.top=n(t).scrollTop()-i.data("offset")+"px",u={top:n(t).scrollTop()+i.data("css-top")+"px",opacity:1},this.delay(function(){return i.css(r).animate(u,this.settings.animationSpeed,"linear",function(){this.locked=!1,i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)):/fade/i.test(this.settings.animation)?(u={opacity:1},this.delay(function(){return i.css(r).animate(u,this.settings.animationSpeed,"linear",function(){this.locked=!1,i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)):i.css(r).show().css({opacity:1}).addClass("open").trigger("opened"):/fade/i.test(this.settings.animation)?i.fadeIn(this.settings.animationSpeed/2):i.show()},hide:function(i,r){var u;return r?/pop/i.test(this.settings.animation)?(u={top:-n(t).scrollTop()-i.data("offset")+"px",opacity:0},this.delay(function(){return i.animate(u,this.settings.animationSpeed,"linear",function(){this.locked=!1,i.css(r).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)):/fade/i.test(this.settings.animation)?(u={opacity:0},this.delay(function(){return i.animate(u,this.settings.animationSpeed,"linear",function(){this.locked=!1,i.css(r).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)):i.hide().css(r).removeClass("open").trigger("closed"):/fade/i.test(this.settings.animation)?i.fadeOut(this.settings.animationSpeed/2):i.hide()},close_video:function(){var i=n(this).find(".flex-video"),t=i.find("iframe");t.length>0&&(t.attr("data-src",t[0].src),t.attr("src","about:blank"),i.fadeOut(100).hide())},open_video:function(){var i=n(this).find(".flex-video"),t=i.find("iframe"),r;t.length>0&&(r=t.attr("data-src"),typeof r=="string"&&(t[0].src=t.attr("data-src")),i.show().fadeIn(100))},cache_offset:function(n){var t=n.show().height()+parseInt(n.css("top"),10);return n.hide(),t},off:function(){n(this.scope).off(".fndtn.reveal")}}})(Foundation.zj,this,this.document);
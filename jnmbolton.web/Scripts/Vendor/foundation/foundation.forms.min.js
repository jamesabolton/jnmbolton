(function(n,t,i,r){"use strict";Foundation.libs.forms={name:"forms",version:"4.1.6",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(t,i,r){return typeof i=="object"&&n.extend(!0,this.settings,i),typeof i!="string"?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[i].call(this,r)},assemble:function(){n('form.custom input[type="radio"]',n(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup),n('form.custom input[type="checkbox"]',n(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup),n("form.custom select",n(this.scope)).not('[data-customforms="disabled"]').not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var r=this;n(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(t){t.preventDefault(),t.stopPropagation(),r.toggle_checkbox(n(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(t){t.preventDefault(),t.stopPropagation(),r.toggle_radio(n(this))}).on("change.fndtn.forms",'form.custom select:not([data-customforms="disabled"])',function(t,i){r.refresh_custom_select(n(this),i)}).on("click.fndtn.forms","form.custom label",function(t){if(n(t.target).is("label")){var i=n("#"+r.escape(n(this).attr("for"))+':not([data-customforms="disabled"])'),u,f;i.length!==0&&(i.attr("type")==="checkbox"?(t.preventDefault(),u=n(this).find("span.custom.checkbox"),u.length==0&&(u=i.add(this).siblings("span.custom.checkbox").first()),r.toggle_checkbox(u)):i.attr("type")==="radio"&&(t.preventDefault(),f=n(this).find("span.custom.radio"),f.length==0&&(f=i.add(this).siblings("span.custom.radio").first()),r.toggle_radio(f)))}}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var f=n(this),i=f.closest("div.custom.dropdown"),e=u(i,"select");if(i.hasClass("open")||n(r.scope).trigger("click"),t.preventDefault(),!1===e.is(":disabled")){if(i.toggleClass("open"),i.hasClass("open"))n(r.scope).on("click.fndtn.forms.customdropdown",function(){i.removeClass("open"),n(r.scope).off(".fndtn.forms.customdropdown")});else n(r.scope).on(".fndtn.forms.customdropdown");return!1}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(t){var i=n(this),r=i.closest("div.custom.dropdown"),f=u(r,"select"),o=0,e;t.preventDefault(),t.stopPropagation(),n(this).hasClass("disabled")||(n("div.dropdown").not(r).removeClass("open"),e=i.closest("ul").find("li.selected"),e.removeClass("selected"),i.addClass("selected"),r.removeClass("open").find("a.current").text(i.text()),i.closest("ul").find("li").each(function(n){i[0]==this&&(o=n)}),f[0].selectedIndex=o,f.data("prevalue",e.html()),f.trigger("change"))});n(t).on("keydown",function(t){var s=i.activeElement,o=Foundation.libs.forms,f=n(".custom.dropdown.open"),e,u,r;f.length>0&&(t.preventDefault(),t.which===13&&f.find("li.selected").trigger("click"),t.which===27&&f.removeClass("open"),t.which>=65&&t.which<=90&&(r=o.go_to(f,t.which),u=f.find("li.selected"),r&&(u.removeClass("selected"),o.scrollTo(r.addClass("selected"),300))),t.which===38?(u=f.find("li.selected"),e=u.prev(":not(.disabled)"),e.length>0&&(e.parent()[0].scrollTop=e.parent().scrollTop()-o.outerHeight(e),u.removeClass("selected"),e.addClass("selected"))):t.which===40&&(u=f.find("li.selected"),r=u.next(":not(.disabled)"),r.length>0&&(r.parent()[0].scrollTop=r.parent().scrollTop()+o.outerHeight(r),u.removeClass("selected"),r.addClass("selected"))))});this.settings.init=!0},go_to:function(n,t){var r=n.find("li"),u=r.length,i,f;if(u>0)for(i=0;i<u;i++)if(f=r.eq(i).text().charAt(0).toLowerCase(),f===String.fromCharCode(t).toLowerCase())return r.eq(i)},scrollTo:function(n,t){if(!(t<0)){var i=n.parent(),u=this.outerHeight(n),f=u*n.index()-i.scrollTop(),r=f/t*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(r,10))||(i[0].scrollTop=i.scrollTop()+r,this.scrollTo(n,t-10))}.bind(this),10)}},append_custom_markup:function(t,i){var r=n(i),f=r.attr("type"),u=r.next("span.custom."+f);r.parent().hasClass("switch")||r.addClass("hidden-field"),u.length===0&&(u=n('<span class="custom '+f+'"><\/span>').insertAfter(r)),u.toggleClass("checked",r.is(":checked")),u.toggleClass("disabled",r.is(":disabled"))},append_custom_select:function(t,i){var f=Foundation.libs.forms,u=n(i),r=u.next("div.custom.dropdown"),o=r.find("ul"),w=r.find(".current"),v=r.find(".selector"),s=u.find("option"),y=s.filter(":selected"),p=u.attr("class")?u.attr("class").split(" "):[],c=0,h="",e,l=!1,a;u.hasClass(f.settings.disable_class)||(r.length===0?(a=u.hasClass("small")?"small":u.hasClass("medium")?"medium":u.hasClass("large")?"large":u.hasClass("expand")?"expand":"",r=n('<div class="'+["custom","dropdown",a].concat(p).filter(function(n,t,i){return n==""?!1:i.indexOf(n)==t}).join(" ")+'"><a href="#" class="selector"><\/a><ul /><\/div>'),v=r.find(".selector"),o=r.find("ul"),h=s.map(function(){return"<li>"+n(this).html()+"<\/li>"}).get().join(""),o.append(h),l=r.prepend('<a href="#" class="current">'+y.html()+"<\/a>").find(".current"),u.after(r).addClass("hidden-field")):(h=s.map(function(){return"<li>"+n(this).html()+"<\/li>"}).get().join(""),o.html("").append(h)),f.assign_id(u,r),r.toggleClass("disabled",u.is(":disabled")),e=o.find("li"),f.cache[r.data("id")]=e.length,s.each(function(t){this.selected&&(e.eq(t).addClass("selected"),l&&l.html(n(this).html())),n(this).is(":disabled")&&e.eq(t).addClass("disabled")}),r.is(".small, .medium, .large, .expand")||(r.addClass("open"),f=Foundation.libs.forms,f.hidden_fix.adjust(o),c=f.outerWidth(e)>c?f.outerWidth(e):c,Foundation.libs.forms.hidden_fix.reset(),r.removeClass("open")))},assign_id:function(n,t){var i=[+new Date,Foundation.random_str(5)].join("-");n.attr("data-id",i),t.attr("data-id",i)},refresh_custom_select:function(t,i){var f=this,e=0,r=t.next(),o=t.find("option"),u=r.find("li");(u.length!=this.cache[r.data("id")]||i)&&(r.find("ul").html(""),o.each(function(){var t=n("<li>"+n(this).html()+"<\/li>");r.find("ul").append(t)}),o.each(function(t){this.selected&&(r.find("li").eq(t).addClass("selected"),r.find(".current").html(n(this).html())),n(this).is(":disabled")&&r.find("li").eq(t).addClass("disabled")}),r.removeAttr("style").find("ul").removeAttr("style"),r.find("li").each(function(){r.addClass("open"),f.outerWidth(n(this))>e&&(e=f.outerWidth(n(this))),r.removeClass("open")}),u=r.find("li"),this.cache[r.data("id")]=u.length)},toggle_checkbox:function(n){var t=n.prev(),i=t[0];!1===t.is(":disabled")&&(i.checked=i.checked?!1:!0,n.toggleClass("checked"),t.trigger("change"))},toggle_radio:function(n){var t=n.prev(),i=t.closest("form.custom"),r=t[0];!1===t.is(":disabled")&&(i.find('input[type="radio"][name="'+this.escape(t.attr("name"))+'"]').next().not(n).removeClass("checked"),n.hasClass("checked")||n.toggleClass("checked"),r.checked=n.hasClass("checked"),t.trigger("change"))},escape:function(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(t){var i=this;i.hidden=t.parents().andSelf().filter(":hidden"),i.hidden.each(function(){var t=n(this);i.tmp.push(t.attr("style")),t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(i){var u=n(this),f=t.tmp[i];f===r?u.removeAttr("style"):u.attr("style",f)}),t.tmp=[],t.hidden=null}},off:function(){n(this.scope).off(".fndtn.forms")}};var u=function(t,i){for(var t=t.prev();t.length;){if(t.is(i))return t;t=t.prev()}return n()}})(Foundation.zj,this,this.document);
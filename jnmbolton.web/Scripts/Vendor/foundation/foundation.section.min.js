(function(n,t,i){"use strict";Foundation.libs.section={name:"section",version:"4.1.3",settings:{deep_linking:!1,one_up:!0,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",active_region_selector:"section.active, .section.active, .active[data-section-region]",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',callback:function(){}},init:function(t,i,r){var u=this;return Foundation.inherit(this,"throttle data_options position_right offset_right"),typeof i=="object"&&n.extend(!0,u.settings,i),typeof i!="string"?(this.set_active_from_hash(),this.events(),!0):this[i].call(this,r)},events:function(){var r=this;n(this.scope).on("click.fndtn.section","[data-section] .title, [data-section] [data-section-title]",function(t){var i=n(this),u=i.closest(r.settings.section_selector);r.toggle_active.call(this,t,r),r.reflow()});n(t).on("resize.fndtn.section",r.throttle(function(){r.resize.call(this)},30)).on("hashchange",function(){r.settings.toggled||(r.set_active_from_hash(),n(this).trigger("resize"))}).trigger("resize");n(i).on("click.fndtn.section",function(t){n(t.target).closest(r.settings.title_selector).length<1&&n(r.settings.nav_selector).children(r.settings.region_selector).removeClass("active").attr("style","")})},toggle_active:function(t,i){var s=n(this),i=Foundation.libs.section,f=s.closest(i.settings.region_selector),h=s.siblings(i.settings.content_selector),r=f.parent(),e=n.extend({},i.settings,i.data_options(r)),u=r.children(i.settings.active_region_selector),o;i.settings.toggled=!0,!e.deep_linking&&h.length>0&&t.preventDefault(),f.hasClass("active")?(i.small(r)||i.is_vertical_nav(r)||i.is_horizontal_nav(r)||i.is_accordion(r))&&(u[0]===f[0]&&(u[0]!==f[0]||e.one_up)||f.removeClass("active").attr("style","")):(u=r.children(i.settings.active_region_selector),o=i.outerHeight(f.children(i.settings.title_selector)),(i.small(r)||e.one_up)&&(i.small(r)?u.attr("style",""):u.attr("style","visibility: hidden; padding-top: "+o+"px;")),i.small(r)?f.attr("style",""):f.css("padding-top",o),f.addClass("active"),u.length>0&&u.removeClass("active").attr("style",""),i.is_vertical_tabs(r)&&(h.css("display","block"),u!==null&&u.children(i.settings.content_selector).css("display","none"))),setTimeout(function(){i.settings.toggled=!1},300),e.callback()},resize:function(){var t=Foundation.libs.section,i=n(t.settings.section_selector);i.each(function(){var i=n(this),r=i.children(t.settings.active_region_selector),f=n.extend({},t.settings,t.data_options(i)),u;r.length>1?r.not(":first").removeClass("active").attr("style",""):r.length<1&&!t.is_vertical_nav(i)&&!t.is_horizontal_nav(i)&&!t.is_accordion(i)&&(u=i.children(t.settings.region_selector).first(),(f.one_up||!t.small(i))&&u.addClass("active"),t.small(i)?u.attr("style",""):u.css("padding-top",t.outerHeight(u.children(t.settings.title_selector)))),t.small(i)?r.attr("style",""):r.css("padding-top",t.outerHeight(r.children(t.settings.title_selector))),t.position_titles(i),t.is_horizontal_nav(i)&&!t.small(i)||t.is_vertical_tabs(i)?t.position_content(i):t.position_content(i,!1)})},is_vertical_nav:function(n){return/vertical-nav/i.test(n.data("section"))},is_horizontal_nav:function(n){return/horizontal-nav/i.test(n.data("section"))},is_accordion:function(n){return/accordion/i.test(n.data("section"))},is_horizontal_tabs:function(n){return/^tabs$/i.test(n.data("section"))},is_vertical_tabs:function(n){return/vertical-tabs/i.test(n.data("section"))},set_active_from_hash:function(){var i=t.location.hash.substring(1),u=n("[data-section]"),r=this;u.each(function(){var t=n(this),f=n.extend({},r.settings,r.data_options(t)),u;i.length>0&&f.deep_linking&&(u=t.children(r.settings.region_selector).attr("style","").removeClass("active"),u.map(function(){return n(this).children('.content[data-slug="'+i+'"], [data-section-content][data-slug="'+i+'"]')}).parent().addClass("active"))})},position_titles:function(t,i){var r=this,f=t.children(this.settings.region_selector).map(function(){return n(this).children(r.settings.title_selector)}),u=0,e=0,r=this;typeof i=="boolean"?f.attr("style",""):f.each(function(){r.is_vertical_tabs(t)?(n(this).css("top",e),e+=r.outerHeight(n(this))):(r.rtl?n(this).css("right",u):n(this).css("left",u),u+=r.outerWidth(n(this)))})},position_content:function(t,i){var r=this,u=t.children(r.settings.region_selector),o=u.map(function(){return n(this).children(r.settings.title_selector)}),h=u.map(function(){return n(this).children(r.settings.content_selector)});if(typeof i=="boolean")h.attr("style",""),t.attr("style","");else if(r.is_vertical_tabs(t)&&!r.small(t)){var s=0,f=Number.MAX_VALUE,e=null;u.each(function(){var u=n(this),o=u.children(r.settings.title_selector),h=u.children(r.settings.content_selector),i=0;e=r.outerWidth(o),i=r.outerWidth(t)-e,i<f&&(f=i),s+=r.outerHeight(o),n(this).hasClass("active")||h.css("display","none")}),u.each(function(){var t=n(this).children(r.settings.content_selector);t.css("minHeight",s),t.css("maxWidth",f-2)}),t.css("maxWidth",e+f)}else u.each(function(){var i=n(this),t=i.children(r.settings.title_selector),u=i.children(r.settings.content_selector);r.rtl?u.css({right:r.position_right(t)+1,top:r.outerHeight(t)-2}):u.css({left:t.position().left-1,top:r.outerHeight(t)-2})}),typeof Zepto=="function"?t.height(this.outerHeight(o.first())):t.height(this.outerHeight(o.first())-2)},position_right:function(t){var i=this,r=t.closest(this.settings.section_selector),u=r.children(this.settings.region_selector),f=t.closest(this.settings.section_selector).width(),e=u.map(function(){return n(this).children(i.settings.title_selector)}).length;return f-t.position().left-t.width()*(t.index()+1)-e},reflow:function(t){var t=t||i;n(this.settings.section_selector,t).trigger("resize")},small:function(t){var i=n.extend({},this.settings,this.data_options(t));return this.is_horizontal_tabs(t)?!1:t&&this.is_accordion(t)?!0:n("html").hasClass("lt-ie9")?!0:n("html").hasClass("ie8compat")?!0:n(this.scope).width()<768},off:function(){n(this.scope).off(".fndtn.section"),n(t).off(".fndtn.section"),n(i).off(".fndtn.section")}}})(Foundation.zj,this,this.document);
(function(n,t){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.1.2",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",init:!1},init:function(i,r,u){var f=this;return typeof r=="object"&&n.extend(!0,this.settings,r),typeof r!="string"?(n(".top-bar").each(function(){f.settings.$w=n(t),f.settings.$topbar=n(this),f.settings.$section=f.settings.$topbar.find("section"),f.settings.$titlebar=f.settings.$topbar.children("ul").first(),f.settings.$topbar.data("index",0);var i=n("<div class='top-bar-js-breakpoint'/>").insertAfter(f.settings.$topbar);f.settings.breakPoint=i.width(),i.remove(),f.assemble(),f.settings.$topbar.parent().hasClass("fixed")&&n("body").css("padding-top",f.outerHeight(f.settings.$topbar))}),f.settings.init||this.events(),this.settings.init):this[r].call(this,u)},events:function(){var i=this,r=this.outerHeight(n(".top-bar"));n(this.scope).on("click.fndtn.topbar",".top-bar .toggle-topbar",function(u){var f=n(this).closest(".top-bar"),e=f.find("section, .section"),o=f.children("ul").first();f.data("height")||i.largestUL(),u.preventDefault(),i.breakpoint()&&f.toggleClass("expanded").css("min-height",""),f.hasClass("expanded")?f.parent().hasClass("fixed")&&(f.parent().removeClass("fixed"),f.addClass("fixed"),n("body").css("padding-top","0"),t.scrollTo(0,0)):(i.rtl?(e.css({right:"0%"}),e.find(">.name").css({right:"100%"})):(e.css({left:"0%"}),e.find(">.name").css({left:"100%"})),e.find("li.moved").removeClass("moved"),f.data("index",0),f.hasClass("fixed")&&(f.parent().addClass("fixed"),f.removeClass("fixed"),n("body").css("padding-top",r)))}).on("click.fndtn.topbar",".top-bar .has-dropdown>a",function(t){var r=n(this).closest(".top-bar"),u=r.find("section, .section"),e=r.children("ul").first(),s=n(this).next(".dropdown").outerHeight(),f,o;(Modernizr.touch||i.breakpoint())&&t.preventDefault(),i.breakpoint()&&(f=n(this),o=f.closest("li"),r.data("index",r.data("index")+1),o.addClass("moved"),i.rtl?(u.css({right:-(100*r.data("index"))+"%"}),u.find(">.name").css({right:100*r.data("index")+"%"})):(u.css({left:-(100*r.data("index"))+"%"}),u.find(">.name").css({left:100*r.data("index")+"%"})),n(".top-bar").css("min-height",s),f.siblings("ul").height(r.data("height")+i.outerHeight(e,!0)),r.css("min-height",r.data("height")+i.outerHeight(e,!0)*2))});n(t).on("resize.fndtn.topbar",function(){i.breakpoint()||n(".top-bar").css("min-height","").removeClass("expanded")}.bind(this));n(this.scope).on("click.fndtn",".top-bar .has-dropdown .back",function(t){t.preventDefault();var f=n(this),r=f.closest(".top-bar"),u=r.find("section, .section"),e=f.closest("li.moved"),o=e.parent();r.data("index",r.data("index")-1),i.rtl?(u.css({right:-(100*r.data("index"))+"%"}),u.find(">.name").css({right:100*r.data("index")+"%"})):(u.css({left:-(100*r.data("index"))+"%"}),u.find(">.name").css({left:100*r.data("index")+"%"})),r.data("index")===0&&r.css("min-height",0),setTimeout(function(){e.removeClass("moved")},300)})},breakpoint:function(){return n(t).width()<=this.settings.breakPoint||n("html").hasClass("lt-ie9")},assemble:function(){var t=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var r=n(this),u=r.siblings(".dropdown"),i=n('<li class="title back js-generated"><h5><a href="#"><\/a><\/h5><\/li>');t.settings.custom_back_text==!0?i.find("h5>a").html("&laquo; "+t.settings.back_text):i.find("h5>a").html("&laquo; "+r.html()),u.prepend(i)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},largestUL:function(){var i=this.settings.$topbar.find("section ul ul"),t=i.first(),r=0,u=this;i.each(function(){n(this).children("li").length>t.children("li").length&&(t=n(this))}),t.children("li").each(function(){r+=u.outerHeight(n(this),!0)}),this.settings.$topbar.data("height",r)},sticky:function(){var i="."+this.settings.stickyClass;if(n(i).length>0){var u=n(i).length?n(i).offset().top:0,r=n(t),f=this.outerHeight(n(".top-bar"));r.scroll(function(){r.scrollTop()>=u?(n(i).addClass("fixed"),n("body").css("padding-top",f)):r.scrollTop()<u&&(n(i).removeClass("fixed"),n("body").css("padding-top","0"))})}},off:function(){n(this.scope).off(".fndtn.topbar"),n(t).off(".fndtn.topbar")}}})(Foundation.zj,this,this.document);